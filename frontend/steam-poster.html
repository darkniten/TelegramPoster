<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üõ†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä Telegram-–ø–æ—Å—Ç–æ–≤</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1e1e2f, #2c2c3c);
      color: #f0f0f0;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    .editor-panel, .preview-panel {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    .editor-panel {
      background-color: #2c2c3c;
      border-right: 2px solid #3a3a50;
    }
    .preview-panel {
      background-color: #1e1e2f;
    }
    h1 {
      margin-top: 0;
      font-size: 1.5em;
      text-align: center;
    }
    .block {
      background-color: rgba(255, 255, 255, 0.05);
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 8px;
      position: relative;
    }
    .block input,
    .block textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: none;
      font-size: 1em;
      box-sizing: border-box;
    }
    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin: 10px 0;
    }
    .controls button, .emoji-toggle {
      padding: 10px;
      background-color: #3b82f6;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .controls button:hover, .emoji-toggle:hover {
      background-color: #2563eb;
    }
    .delete-block {
      position: absolute;
      top: 8px;
      right: 8px;
      background-color: #ef4444;
      border: none;
      border-radius: 4px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      padding: 2px 6px;
    }
    .add-hash-btn {
      position: absolute;
      top: 8px;
      right: 40px;
      background-color: #10b981;
      border: none;
      border-radius: 4px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      padding: 2px 6px;
    }
    #postPreview {
      white-space: pre-wrap;
      background-color: #151522;
      padding: 15px;
      border-radius: 8px;
      font-family: monospace;
    }
    #emojiPanel {
      display: none;
      grid-template-columns: repeat(10, 1fr);
      gap: 5px;
      margin-top: 10px;
      max-height: 150px;
      overflow-y: auto;
    }
    .emoji {
      font-size: 1.3em;
      cursor: pointer;
      text-align: center;
      background-color: #3a3a50;
      border-radius: 6px;
      padding: 5px;
    }
    .channel-row {
      display: flex;
      gap: 10px;
      margin-top: 5px;
    }
    .channel-row input {
      flex: 1;
    }
  </style>
</head>
<body>
  <div class="editor-panel">
    <h1>üõ†Ô∏è –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ—Å—Ç–æ–≤</h1>
    <div class="controls">
      <button onclick="addBlock('title')">–ó–∞–≥–æ–ª–æ–≤–æ–∫</button>
      <button onclick="addBlock('text')">–¢–µ–∫—Å—Ç</button>
      <button onclick="addBlock('hashtag')">–•—ç—à—Ç–µ–≥–∏</button>
      <button onclick="addBlock('button')">–ö–Ω–æ–ø–∫–∞-—Å—Å—ã–ª–∫–∞</button>
      <button onclick="addBlock('divider')">–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å</button>
      <button onclick="addBlock('quote')">–¶–∏—Ç–∞—Ç–∞</button>
      <button onclick="addBlock('mention')">–£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞</button>
    </div>
    <button class="emoji-toggle" onclick="toggleEmojiPanel()">üòÄ –≠–º–æ–¥–∑–∏</button>
    <div id="emojiPanel"></div>
    <div id="editorArea"></div>
    <div class="controls">
      <button onclick="generatePreview()">üîç –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
      <button onclick="copyToClipboard()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
      <button onclick="clearEditor()">üßº –û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>
  </div>
  <div class="preview-panel">
    <h1>üìÑ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h1>
    <div id="postPreview"></div>
  </div>

  <script>
    const emojis = [..."üòÄüòÅüòÇü§£üòÉüòÑüòÖüòÜüòâüòäüòãüòéüòçüòòü•∞üòóüòôüòöüôÇü§óü§©ü§îü§®üòêüòëüò∂üôÑüòèüò£üò•üòÆü§êüòØüò™üò´üò¥üòåüòõüòúüòùü§§üòíüòìüòîüòïüôÉü§ëüò≤üò∑ü§íü§ïü§¢ü§Æü§ßüòµü•¥üòµ‚Äçüí´ü§Øüò¨üò∞üò±ü•µü•∂üò®üò∞üò≥üò°üò†üò§üòñüòûüòüüò≠üò¢üò¶üòßüò®üò©üò¨üòÆ‚Äçüí®üòØüò™üò´üò¥ü§§ü§ìüßêüòïüôÉü§ëüò≤ü•≥üòáü•∫üòàüëøüëπüë∫üíÄ‚ò†Ô∏èüëªüëΩüëæü§ñüí©üî•‚ú®üéâüéäüí•üåà‚òÄÔ∏èüåô‚≠ê‚ö°‚ùÑÔ∏èüåäüíßüïπÔ∏èüéÆüé≤üéØüì¶üõíüîó"];

    function toggleEmojiPanel() {
      const panel = document.getElementById('emojiPanel');
      if (panel.style.display === 'grid') {
        panel.style.display = 'none';
        return;
      }
      panel.style.display = 'grid';
      if (panel.children.length === 0) {
        emojis.forEach(e => {
          const span = document.createElement('span');
          span.className = 'emoji';
          span.innerText = e;
          span.onclick = () => {
            const activeInput = document.activeElement;
            if (activeInput && (activeInput.tagName === 'INPUT' || activeInput.tagName === 'TEXTAREA')) {
              const start = activeInput.selectionStart;
              const end = activeInput.selectionEnd;
              const text = activeInput.value;
              activeInput.value = text.slice(0, start) + e + text.slice(end);
              activeInput.focus();
              activeInput.selectionStart = activeInput.selectionEnd = start + e.length;
            }
          };
          panel.appendChild(span);
        });
      }
    }

    function addBlock(type) {
      const editor = document.getElementById('editorArea');
      const block = document.createElement('div');
      block.className = 'block';
      block.dataset.type = type;

      let label = '', input;

      if (type === 'title') {
        label = '–ó–∞–≥–æ–ª–æ–≤–æ–∫:';
        input = document.createElement('input');
        input.placeholder = '–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫';
      } else if (type === 'text') {
        label = '–¢–µ–∫—Å—Ç:';
        input = document.createElement('textarea');
        input.placeholder = '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç';
      } else if (type === 'hashtag') {
        label = '–•—ç—à—Ç–µ–≥–∏:';
        input = document.createElement('input');
        input.placeholder = '#–ø—Ä–∏–º–µ—Ä #—Ç–µ–º–∞';
      } else if (type === 'button') {
        label = '–ö–Ω–æ–ø–∫–∞ (–¢–µ–∫—Å—Ç | URL):';
        input = document.createElement('input');
        input.placeholder = '–ö—É–ø–∏—Ç—å | https://example.com';
      } else if (type === 'divider') {
        label = '–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å:';
        input = document.createElement('input');
        input.placeholder = '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ';
      } else if (type === 'quote') {
        label = '–¶–∏—Ç–∞—Ç–∞:';
        input = document.createElement('textarea');
        input.placeholder = '–í–≤–µ–¥–∏—Ç–µ —Ü–∏—Ç–∞—Ç—É';
      } else if (type === 'mention') {
        label = '–£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞:';
        const container = document.createElement('div');
        container.className = 'channel-row';
        const labelInput = document.createElement('input');
        labelInput.placeholder = '–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –õ—É—á—à–∏–π –∫–∞–Ω–∞–ª)';
        const userInput = document.createElement('input');
        userInput.placeholder = 'username';
        block.appendChild(document.createElement('br'));
        container.appendChild(labelInput);
        container.appendChild(userInput);
        block.appendChild(container);
        const delBtn = document.createElement('button');
        delBtn.innerText = 'üóëÔ∏è';
        delBtn.className = 'delete-block';
        delBtn.onclick = () => block.remove();
        block.appendChild(delBtn);
        editor.appendChild(block);
        return;
      }

      block.innerHTML = `<strong>${label}</strong>`;
      block.appendChild(input);

      if (type === 'hashtag') {
        const addHashBtn = document.createElement('button');
        addHashBtn.innerText = '#';
        addHashBtn.className = 'add-hash-btn';
        addHashBtn.onclick = () => {
          input.value += input.value && !input.value.endsWith(' ') ? ' #' : '#';
          input.focus();
        };
        block.appendChild(addHashBtn);
      }

      const delBtn = document.createElement('button');
      delBtn.innerText = 'üóëÔ∏è';
      delBtn.className = 'delete-block';
      delBtn.onclick = () => block.remove();
      block.appendChild(delBtn);

      editor.appendChild(block);
    }

    function generatePreview() {
      const blocks = document.querySelectorAll('#editorArea .block');
      let post = '';
      blocks.forEach(block => {
        const type = block.dataset.type;
        if (type === 'mention') {
          const inputs = block.querySelectorAll('input');
          const label = inputs[0].value.trim();
          const user = inputs[1].value.trim();
          if (label && user) post += `\n${label}: @${user}`;
        } else {
          const input = block.querySelector('input, textarea');
          const value = input?.value.trim();
          if (!value) return;
          if (type === 'title') post += `\uD83D\uDD39 <b>${value}</b>\n`;
          else if (type === 'text') post += `${value}\n`;
          else if (type === 'hashtag') post += `\n${value}`;
          else if (type === 'button') {
            const [text, url] = value.split('|').map(v => v.trim());
            if (text && url) post += `\n[${text}](${url})\n`;
          }
          else if (type === 'divider') post += `\n${value}\n`;
          else if (type === 'quote') post += `\n> ${value}\n`;
        }
      });
      document.getElementById('postPreview').textContent = post.trim();
    }

    function copyToClipboard() {
      const text = document.getElementById('postPreview').textContent;
      navigator.clipboard.writeText(text).then(() => alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!'));
    }

    function clearEditor() {
      document.getElementById('editorArea').innerHTML = '';
      document.getElementById('postPreview').textContent = '';
      document.getElementById('emojiPanel').innerHTML = '';
      document.getElementById('emojiPanel').style.display = 'none';
    }
  </script>
</body>
</html>
